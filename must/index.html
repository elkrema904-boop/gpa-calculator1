<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GPA & CGPA Calculator – MUST</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background: #f4f6f8;
  font-family: "Segoe UI", Arial, sans-serif;
  padding: 20px;
  color: #1f2937;
}

.box {
  background: #ffffff;
  padding: 22px;
  max-width: 440px;
  margin: auto;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
}

h2 {
  text-align: center;
  margin-bottom: 4px;
}

.subtitle {
  text-align: center;
  font-size: 13px;
  color: #6b7280;
  margin-bottom: 15px;
}

.course {
  display: grid;
  grid-template-columns: 1.5fr 0.9fr 0.7fr 0.6fr 0.3fr;
  gap: 6px;
  margin-bottom: 8px;
}

.course input,
.course select {
  padding: 7px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  background: #1e3a8a;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
}

button.secondary {
  background: #374151;
}

#result {
  margin-top: 15px;
  padding: 12px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  text-align: center;
  font-size: 14px;
}

.warning {
  margin-top: 10px;
  text-align: center;
  color: #b91c1c;
  font-size: 13px;
}
</style>
</head>

<body>

<div class="box">
  <h2>GPA & CGPA Calculator</h2>
  <div class="subtitle">
    Misr University for Science and Technology (MUST)
  </div>

  <div id="courses">
    <div class="course">
      <input placeholder="Subject">

      <select class="gradeSelect">
        <option value="">Grade</option>
        <option>A</option>
        <option>A-</option>
        <option>B+</option>
        <option>B</option>
        <option>C+</option>
        <option>C</option>
        <option>D</option>
        <option>F</option>
      </select>

      <input class="gradeCustom" type="number" placeholder="%" min="0" max="100">

      <select class="credits">
        <option value="">Cr</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
      </select>

      <input type="checkbox" checked title="Include">
    </div>
  </div>

  <button onclick="addCourse()">Add Course</button>
  <button class="secondary" onclick="calculate()">Calculate GPA</button>

  <div id="result"></div>
  <div class="warning">⚠️ أوعي تشيل مادة</div>
</div>

<script>
// MUST percentage to GPA
function percentToGPA_MUST(p) {
  if (p >= 90) return 4.0;
  if (p >= 85) return 3.7;
  if (p >= 80) return 3.3;
  if (p >= 75) return 3.0;
  if (p >= 70) return 2.3;
  if (p >= 65) return 2.0;
  if (p >= 60) return 1.0;
  return 0.0;
}

function addCourse() {
  document.getElementById("courses").innerHTML += `
  <div class="course">
    <input placeholder="Subject">

    <select class="gradeSelect">
      <option value="">Grade</option>
      <option>A</option>
      <option>A-</option>
      <option>B+</option>
      <option>B</option>
      <option>C+</option>
      <option>C</option>
      <option>D</option>
      <option>F</option>
    </select>

    <input class="gradeCustom" type="number" placeholder="%" min="0" max="100">

    <select class="credits">
      <option value="">Cr</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
    </select>

    <input type="checkbox" checked>
  </div>`;
}

function calculate() {
  let totalPoints = 0;
  let totalCredits = 0;
  let errors = [];

  document.querySelectorAll(".course").forEach((c, i) => {
    const subject = c.children[0].value.trim();
    const gradeSelect = c.querySelector(".gradeSelect").value;
    const gradeCustom = c.querySelector(".gradeCustom").value;
    const credits = Number(c.querySelector(".credits").value);
    const included = c.children[4].checked;

    if (!included) return;

    if (!subject) {
      errors.push(`Course ${i+1}: Subject name missing`);
      return;
    }

    if (!credits) {
      errors.push(`Course ${i+1}: Credits missing`);
      return;
    }

    let gradePoint;

    if (gradeCustom) {
      const p = Number(gradeCustom);
      if (p < 0 || p > 100) {
        errors.push(`Course ${i+1}: Invalid percentage`);
        return;
      }
      gradePoint = percentToGPA_MUST(p);
    } else {
      const grades = {
        "A":4,"A-":3.7,
        "B+":3.3,"B":3,
        "C+":2.3,"C":2,
        "D":1,"F":0
      };
      if (!(gradeSelect in grades)) {
        errors.push(`Course ${i+1}: Select grade or enter %`);
        return;
      }
      gradePoint = grades[gradeSelect];
    }

    totalPoints += gradePoint * credits;
    totalCredits += credits;
  });

  if (errors.length) {
    document.getElementById("result").innerHTML =
      `<div style="color:#b91c1c">
        <strong>Errors:</strong>
        <ul>${errors.map(e => `<li>${e}</li>`).join("")}</ul>
      </div>`;
    return;
  }

  const gpa = totalCredits ? totalPoints / totalCredits : 0;

  document.getElementById("result").innerHTML = `
    <strong>GPA:</strong> ${gpa.toFixed(2)}<br>
    <strong>CGPA:</strong> ${gpa.toFixed(2)}<br>
    <span style="font-size:12px; color:#065f46;">
      Academic System – MUST
    </span>
  `;
}
</script>

</body>
</html>
